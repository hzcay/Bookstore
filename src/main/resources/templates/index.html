<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org"
  lang="vi"
  th:replace="~{layout :: layout(~{::content}, 'Browse – Bookstore VIP')}"
>
  <div th:fragment="content">
    <!-- HERO / BANNER -->
    <section
      id="hero"
      class="hero"
      style="--hero-img: url('/img/banner/banner.jpg')"
    >
      <div class="container">
        <div class="hero-body" data-aos="fade-up" data-aos-duration="700">
          <span class="badge" data-aos="zoom-in" data-aos-delay="40">
            New season · Up to 40% off
          </span>
          <h1 class="hero-title" data-aos="fade-up" data-aos-delay="120">
            Read smarter, live better.
          </h1>
          <p class="hero-sub muted" data-aos="fade-up" data-aos-delay="200">
            Khám phá hàng ngàn tựa sách — kéo xuống bên dưới để xem thêm nha.
          </p>

          <div class="row gap" data-aos="fade-up" data-aos-delay="260">
            <a href="#card" class="btn cta">Xem ngay</a>
          </div>
        </div>
        <img
          class="hero-art"
          src="/img/banner/cr7.png"
          alt="Book day illustration"
          data-aos="fade-left"
          data-aos-delay="120"
        />
      </div>
    </section>

    <!-- FEATURE ICONS -->
    <section
      id="feature"
      class="section-p1"
      data-aos="fade-up"
      data-aos-duration="600"
    >
      <div class="fe-box" data-aos="zoom-in" data-aos-delay="0">
        <img src="img/features/f1.png" alt="" />
        <h6>Free Shipping</h6>
      </div>
      <div class="fe-box" data-aos="zoom-in" data-aos-delay="60">
        <img src="img/features/f2.png" alt="" />
        <h6>Online Order</h6>
      </div>
      <div class="fe-box" data-aos="zoom-in" data-aos-delay="120">
        <img src="img/features/f3.png" alt="" />
        <h6>Save Money</h6>
      </div>
      <div class="fe-box" data-aos="zoom-in" data-aos-delay="180">
        <img src="img/features/f4.png" alt="" />
        <h6>Promotions</h6>
      </div>
      <div class="fe-box" data-aos="zoom-in" data-aos-delay="240">
        <img src="img/features/f5.png" alt="" />
        <h6>Happy Sell</h6>
      </div>
      <div class="fe-box" data-aos="zoom-in" data-aos-delay="300">
        <img src="img/features/f6.png" alt="" />
        <h6>F24/7 Support</h6>
      </div>
    </section>

    <!-- SEARCH CARD -->
    <section class="card" id="card" data-aos="fade-up" data-aos-duration="700">
      <h2>Bookstore</h2>

      <form id="searchForm" class="row gap">
        <input
          class="input"
          name="q"
          id="searchQ"
          type="search"
          placeholder="Search by title/author/publisher…"
          enterkeyhint="search"
          list="qHints"
        />
        <datalist id="qHints"></datalist>
        <input
          class="input"
          name="minPrice"
          placeholder="Min price"
          type="number"
          step="5000"
        />
        <input
          class="input"
          name="maxPrice"
          placeholder="Max price"
          type="number"
          step="5000"
        />

        <select class="input" name="categoryId" id="filterCategory">
          <option value="">All categories</option>
        </select>

        <select class="input" name="sortBy">
          <option value="title">Title</option>
          <option value="salePrice">Price</option>
          <option value="createAt">Newest</option>
        </select>

        <select class="input" name="sortDir">
          <option value="asc">ASC</option>
          <option value="desc">DESC</option>
        </select>

        <button class="btn" type="submit">Search</button>
      </form>
    </section>

    <!-- BOOK GRID -->
    <section
      class="grid"
      id="bookGrid"
      data-aos="fade-up"
      data-aos-duration="600"
    ></section>

    <!-- PAGER -->
    <div
      class="row center"
      id="pager"
      data-aos="fade-up"
      data-aos-duration="500"
    ></div>
  </div>

  <script>
    (function () {
      if (!window.AOS) return;
      AOS.init({
        duration: 600,
        easing: "ease-out-cubic",
        offset: 80, // chừa chỗ vượt qua navbar sticky
        once: true, // animate 1 lần
        mirror: false,
      });
    })();
  </script>

  <style>
    /* để CSS xử lý khoảng trống cho navbar sticky */
    #card {
      scroll-margin-top: 72px;
    } /* chỉnh theo nav thật của bạn */
    html {
      scroll-behavior: auto;
    } /* tắt smooth mặc định để tránh “double” */
  </style>

  <script>
    (function () {
      document.querySelectorAll('a[href="#card"]').forEach((a) => {
        a.addEventListener("click", (e) => {
          e.preventDefault();
          const el = document.getElementById("card");
          if (!el) return;

          const reduce = window.matchMedia(
            "(prefers-reduced-motion: reduce)"
          ).matches;
          el.scrollIntoView({
            behavior: reduce ? "auto" : "smooth",
            block: "start",
          });
        });
      });
    })();
  </script>

</html>
